(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{429:function(t,n,s){"use strict";s.r(n);var a=s(17),e=Object(a.a)({},(function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"宝塔面板v7-7-0-解锁nginx防火墙及网站监控报表-绕过绑定账号"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#宝塔面板v7-7-0-解锁nginx防火墙及网站监控报表-绕过绑定账号"}},[t._v("#")]),t._v(" 宝塔面板v7.7.0-解锁Nginx防火墙及网站监控报表-绕过绑定账号")]),t._v(" "),s("p",[t._v("测试环境：Ubuntu / Debian / CentOS\n测试时间：2021-12-20\n宝塔版本： 7.7.0\n仅测试了Nginx防火墙及网站监控报表两款插件，其它收费插件未测试\n其它系统及版本未进行测试，请自行验证，请勿在生产环境下进行测试！\n注意：修改代码后需要重启面板服务才能使其生效，如果面板出现乱码重启服务器即可；")]),t._v(" "),s("p",[t._v("解锁所有付费插件为永不过期")]),t._v(" "),s("p",[t._v('文件路径：www/server/panel/data/plugin.json\n搜索字符串："endtime": -1 全部替换为 "endtime": 999999999999\n显示永久专业版或企业版标识')]),t._v(" "),s("p",[t._v('文件路径：www/server/panel/data/plugin.json\n查找字符串：name": "coll_admin"，将panel_pro或panel_ltd后面的-1改为0\n禁止解锁插件后自动修复为免费版')]),t._v(" "),s("p",[t._v('文件路径：www/server/panel/data/repair.json\n查找字符串："id": 16，将这段修复权限的代码删除\n禁止宝塔面板检测升级，防止失效')]),t._v(" "),s("p",[t._v('文件路径：www/server/panel/data/plugin.json\n查找字符串：name": "coll_admin"，将这段里的update_mgs删除或者改为null\n下面是2021/08/24的方法，上面是最新的\n修改后不能使用问题：如果修改后出现软件中心页面空白，那是因为代码位置有问题，可以参考下面示例图代码位置 位置一定要一致\n开始\n打开目录/www/server/panel/class找到并编辑panelplugin.py文件\n使用Ctrl+F搜索并找到softList[\'list\'] = tmpList这段代码，在其下方添加如下代码：')]),t._v(" "),s("div",{staticClass:"language-python line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("                softList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pro'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" soft "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" softList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'list'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            soft"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'endtime'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[t._v("示例：\n"),s("img",{attrs:{src:"bt_files/2.png",alt:""}})]),t._v(" "),s("p",[t._v("修改完成后重启面板，重启完成后就可以直接安装收费的插件了，Nginx防火墙也可以直接安装使用")]),t._v(" "),s("p",[t._v("网站监控报表\n如果需要使用网站监控报表还需另外修改一次代码：\n安装好网站监控报表插件后打开/www/server/panel/plugin/total目录并编辑total_main.py文件\n使用Ctrl+F搜索并找到if 'bt_total' in session: return public.returnMsg(True,'OK!');这段代码\n在这段代码前加上#将其注释掉，并在其下方加入以下代码：")]),t._v(" "),s("div",{staticClass:"language-python line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("        session"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bt_total'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" public"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("returnMsg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'OK!'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("示例：\n"),s("img",{attrs:{src:"bt_files/1.png",alt:""}})]),t._v(" "),s("p",[t._v("然后再次重启面板，即可使用网站监控报表插件了；")]),t._v(" "),s("p",[t._v("一键消除宝塔的强制登录方法简单粗暴，但是非常有效~")]),t._v(" "),s("p",[t._v("复制该命令到终端运行即可："),s("code",[t._v("rm -f /www/server/panel/data/bind.pl")])])])}),[],!1,null,null,null);n.default=e.exports}}]);